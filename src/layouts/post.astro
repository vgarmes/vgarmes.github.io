---
import type { MarkdownLayoutProps } from 'astro'
import BaseLayout from './base.astro'
import { formatDate } from '~/util/helpers'
import TableOfContents from '~/components/blog/TableOfContents'
import generateToc from '~/util/generateToc'

// eslint-disable-next-line no-unused-vars
type Props = MarkdownLayoutProps<{
	title: string
	description: string
	pubDate: string
}>

const { frontmatter, headings } = Astro.props
const date = formatDate(frontmatter.pubDate)
const toc = generateToc(headings)
---

<BaseLayout title={frontmatter.title} description={frontmatter.description}>
	<TableOfContents client:visible toc={toc} />
	<article
		id="blog-post"
		class="prose mx-auto w-full prose-pre:rounded-md prose-pre:p-4 prose-pre:shadow dark:prose-invert"
	>
		<h1 class="text-3xl font-extrabold">{frontmatter.title}</h1>
		<p>{frontmatter.description}</p>
		<p>Written on: {date}</p>
		<slot />
	</article>
</BaseLayout>
