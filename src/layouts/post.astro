---
import type { MarkdownLayoutProps } from 'astro'
import BaseLayout from './base.astro'
import { formatDate } from '~/util/helpers'
import TableOfContents from '~/components/blog/TableOfContents'
import generateToc from '~/util/generateToc'

// eslint-disable-next-line no-unused-vars
type Props = MarkdownLayoutProps<{
	title: string
	description: string
	pubDate: string
}>

const { frontmatter, headings } = Astro.props
const date = formatDate(frontmatter.pubDate)
const toc = generateToc(headings)
---

<BaseLayout title={frontmatter.title} description={frontmatter.description}>
	<div class="flex w-full items-start justify-center">
		<article id="blog-post" class="max-w-full flex-shrink-0">
			<header class="pb-16">
				<h1 class="pb-6 text-3xl font-extrabold">{frontmatter.title}</h1>
				<p class="text-sm">{date}</p>
			</header>
			<div
				class="prose prose-headings:scroll-mt-16 prose-pre:rounded-md prose-pre:p-4 prose-pre:shadow dark:prose-invert"
			>
				<slot />
			</div>
		</article>
		<TableOfContents client:load toc={toc} />
	</div>
</BaseLayout>
