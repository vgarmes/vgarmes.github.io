---
import { getCollection } from 'astro:content'
import PostCard from './PostCard.astro'
const posts = (
	await getCollection('blog', ({ data }) => {
		return data.draft !== true
	})
)
	.sort((a, b) => {
		return b.data.pubDate.getTime() - a.data.pubDate.getTime()
	})
	.slice(0, 3)
---

<section class="mt-3">
	<h2 class="pb-6 text-3xl font-black">What I've been writing</h2>
	<div
		class="grid grid-cols-1 gap-8 sm:grid-cols-[repeat(auto-fill,_minmax(400px,_1fr))]"
	>
		{
			posts.map(({ data, slug, body }) => (
				<PostCard
					title={data.title}
					description={data.description}
					slug={slug}
					length={body.length}
					pubDate={data.pubDate}
				/>
			))
		}
	</div>
</section>
